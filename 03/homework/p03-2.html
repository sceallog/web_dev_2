<!-- M23W0012 Buettner Sven -->
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>p03-2</title>
</head>

<body>
  <h1>数当てゲーム</h1>
  <div>
    <p>ボタンクリックでゲームが始まります。</p>
    <p>当たりでしたら探している数字が変わりますよ！</p>
    <button onclick="guessNumber()">推測を入力</button>
  </div>

  <script>
    let target = Math.floor(Math.random() * 100) + 1
    let count = 0;

    function guessNumber() {
      let userGuess = Number(window.prompt('1から100の間、推測の数字を入力してください。'));
      let result;
      count += 1;

      const difference = target - userGuess;

      switch (true) {
        case (userGuess < 1 || userGuess > 100 || Number.isNaN(userGuess)): 
          console.log('1から100の間の数字のみ入力可能です。');
          break;
        case (userGuess < target):
          result = (1 <= difference) && (difference <= 5) ? 
            'おしい、それより大きい数です' : 'それより大きい数です';
          break;
        case (userGuess > target):
          result = (-5 <= difference) && (difference <= -1) ? 
            'おしい、それより小さい数です' : 'それより小さいです';
          break;
        case (userGuess === target):
          result = '正解です';
          break;
      }
      console.log(result);
      console.log('あなたの推測: ' + userGuess)
      if (result === '正解です') {
        console.log('正解までの回数：' + count);
        count = 0;
        target = Math.floor(Math.random() * 100) + 1;
      } else {
        console.log('このラウンドの推測の提案回数: ' + count);
      };
    };
  </script>
</body>
</html>